<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Rastreo de Envíos | Importa Fácil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --bg:#f5f6fa;--card:#fff;--text:#2c3e50;--muted:#64748b;
      --pri:#3498db;--pri-hover:#2980b9;--ring:#93c5fd;
      --ok:#10b981;--err:#ef4444;--info:#2563eb
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family:Segoe UI,system-ui,Arial,Helvetica,sans-serif;
      background:var(--bg);
      margin:0;
      display:grid;
      /* ⬇️ antes: place-items:center; */
      place-items:start center;       /* arriba y centrado */
      padding:1rem 2rem 2rem;         /* menos espacio arriba */
      color:var(--text);
    }
    .wrap{width:100%;max-width:640px}
    .logo{display:block;margin:0 auto 1.25rem auto;max-width:220px;height:auto}

    .card{
      background:var(--card);
      border-radius:16px;
      padding:1.5rem;
      box-shadow:0 10px 30px rgba(0,0,0,.08);
      border:1px solid rgba(2,6,23,.06);
    }
    h2{margin:0 0 .5rem 0;text-align:center;font-weight:700}
    p.helper{margin:.25rem 0 1rem 0;text-align:center;color:var(--muted);font-size:.95rem}

    .row{display:flex;gap:.75rem;align-items:center;margin-top:.5rem}
    .row input{
      flex:1; padding:.875rem 1rem; border:1px solid #d1d5db; border-radius:12px; font-size:1rem;
      background:#fff; outline:none; transition:.15s border-color,.15s box-shadow;
    }
    .row input:focus{border-color:var(--ring); box-shadow:0 0 0 4px rgba(147,197,253,.35)}
    .row button{
      padding:.9rem 1.1rem; border:0; border-radius:12px; font-weight:600;
      background:linear-gradient(180deg,var(--pri),#248bd1); color:#fff; cursor:pointer; min-width:120px;
      transition:transform .05s ease, filter .15s ease;
    }
    .row button:active{transform:translateY(1px)}
    .row button:hover{filter:brightness(1.05)}

    #res{
      margin-top:1rem;
      border:1px dashed rgba(2,6,23,.12);
      border-radius:12px;
      padding:1rem 1.1rem;
      background:#f8fafc;
      font-size:.98rem;
      word-break:break-word;
    }
    #res.ok{border:1px solid rgba(16,185,129,.35); background:#ecfdf5}
    #res.err{border:1px solid rgba(239,68,68,.35); background:#fef2f2}
    #res.info{border:1px solid rgba(37,99,235,.25); background:#eff6ff}

    .spin{width:18px;height:18px;border:3px solid #1f2937;border-top-color:#60a5fa;border-radius:50%;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    table{width:100%;border-collapse:collapse}
    th,td{padding:.6rem .5rem;text-align:left;border-bottom:1px solid #e5e7eb}
    th{font-weight:700;color:#334155}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:#f1f5f9;padding:.1rem .35rem;border-radius:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- deja tu misma cadena base64 aquí -->
    <img class="logo" alt="Importa Fácil"
         src="data:image/png;base64, AQUÍ_TU_MISMO_BASE64 " />

    <div class="card">
      <h2>Rastreo de Envíos</h2>
      <div class="row">
        <input id="trk" placeholder="Ej: DEL12345" />
        <button onclick="buscar()">Buscar</button>
      </div>
      <div id="res" class="info"></div>
    </div>
  </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyL54IEYlM-jJJiq50QQtf3dvHIihLWQT6BPUGdf709FiH3bsW-Pz1Mgr7myvFyU4kTIQ/exec";
    const $ = (q)=>document.querySelector(q);

    document.addEventListener('DOMContentLoaded', () => {
      const inp = $('#trk');
      if (inp) inp.addEventListener('keydown', (e) => { if (e.key === 'Enter') buscar(); });
    });

    function buscar(){
      const t = ($('#trk').value || '').trim().toUpperCase();
      const res = $('#res');
      if(!t){
        res.className = 'info';
        res.innerHTML = '⚠️ Ingresá un número de tracking.';
        return;
      }
      res.className = 'info';
      res.innerHTML = '<div style="display:flex;align-items:center;gap:.6rem"><span class="spin"></span><span>Consultando…</span></div>';

      const old = document.getElementById('jsonp-call');
      if (old) old.remove();

      window.mostrar = mostrar;

      const url = API_URL
        + '?tracking=' + encodeURIComponent(t)
        + '&ua=' + encodeURIComponent(navigator.userAgent || '')
        + '&ref=' + encodeURIComponent(document.referrer || location.origin || '')
        + '&callback=mostrar'
        + '&_=' + Date.now();

      const s = document.createElement('script');
      s.id = 'jsonp-call';
      s.src = url;
      s.onerror = () => { res.className = 'err'; res.textContent = '❌ Error de conexión.'; };
      document.body.appendChild(s);
    }

    function mostrar(api){
      const d = $('#res');
      if (!api || !api.ok) {
        d.className = 'err';
        d.textContent = '❌ Error en la API.';
        return;
      }
      if (!api.results || !api.results.length) {
        d.className = 'err';
        d.innerHTML = '❌ Envío no encontrado. Verificá el número.';
        return;
      }
      const x = api.results[0];
      d.className = 'ok';
      d.innerHTML = `
        <p><strong>Tracking:</strong> <code>${esc(x.tracking||'')}</code></p>
        <p><strong># de almacén:</strong> ${esc(x.almacen||'')}</p>
        <p
